!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.holyEditorPluginCards=t():e.holyEditorPluginCards=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"setSelection",function(){return c});var i=n(1),r=n.n(i),u=n(4),o=(n.n(u),function(){var e=window.getSelection();if(e.rangeCount>0){return e.getRangeAt(0)}return null}),c=function(e){var t=window.getSelection();return t.removeAllRanges(),t.addRange(e),t},a={tooltip:"卡片",host:window.location.host},M=function(e){return function(t){function n(e,t){var n=Math.random().toString(36).substr(2);g.close(),document.execCommand("insertHTML",!1,'<iframe data-iframe-id="'+t+'" data-iframe-category="'+I+'" name="'+I+n+'" width="100%" onload="this.height='+I+n+'.document.body.scrollHeight" frameborder="0" src="'+e+'" />')}var i=(t.el,t.widget),r=t.__S_,M=t.$selector,l=t.util;console.log(e);var y=Object.assign({},a,e),d=function(e){return dekuElement.create("ul",{class:r["cards-panel__list"]},e.map(function(e,t){return dekuElement.create("li",null,dekuElement.create("a",{href:"javascript:;",class:r["cards-panel__insert"],"data-id":e.id},e.title))}))},j=void 0,I="articles",s=function(e){clearTimeout(j),j=setTimeout(function(){$.ajax({method:"GET",url:"//"+y.host+"/"+I+"?q="+e,dataType:"json"}).done(function(e){console.log(e[I]);var t=d(e[I]),n=Object(u.render)(t),i=document.getElementById("js-cards-panel-list");$(i).html(n)}).fail(function(e){alert("请求失败")})},300)},g=new i.Modal(M,{panel:dekuElement.create("div",{class:r["cards-panel"]},dekuElement.create("div",{class:r["cards-panel__search"]},dekuElement.create("select",{id:"js-cards-panel-select"},dekuElement.create("option",{value:"articles",selected:"articles"===I},"文章"),dekuElement.create("option",{value:"usages",selected:"usages"===I},"应用案例")),dekuElement.create("input",{id:"js-cards-panel-input",class:r["cards-panel__input"],placeholder:"输入关键字"})),dekuElement.create("div",{id:"js-cards-panel-list"}))}),L=new i.Menu(M,{icon:"cards",tooltip:y.tooltip,onMouseDown:function(){g.open()}}),p={cacheRange:null};g.on("open:before",function(){var e=o();null!==e&&(p.cacheRange=e)}),g.on("open:after",function(){$("#js-cards-panel-input").trigger("input")}),g.on("close:before",function(){c(p.cacheRange)}),$("#js-cards-panel-list").on("click","a",function(){var e=$(this).data("id");n("//"+y.host+"/card/"+I+"/"+e,e)}),$("#js-cards-panel-select").on("change",function(){I=this.value,$("#js-cards-panel-input").trigger("input")}),$("#js-cards-panel-input").on("input",function(){s(this.value)}),l.addSelectionChangeEvent(function(e){e?l.toEnable(function(){return L.enable()}):l.toDisable(function(){return L.disable()})})}},l={name:"cards",run:M,style:r.a};t.default=l},function(e,t,n){var i=n(2);e.exports="string"==typeof i?i:i.toString()},function(e,t,n){t=e.exports=n(3)(void 0),t.push([e.i,'.tool--cards{display:inline-block;vertical-align:top}.tool--cards .icon-cards{position:relative}.tool--cards .icon-cards:after{content:"";position:absolute;top:0;left:0;display:inline-block;width:30px;height:30px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTExOTUxMzcyNzU0IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjY5MjMzIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTg2Mi4zIDk3OC42SDE0Mi43bDkwLjEtNzMuMlYxMjEuMmMwLTQ1LjQgMzYuOC04Mi4yIDgyLjItODIuMmg1NDcuNGM0NS40IDAgODIuMiAzNi44IDgyLjIgODIuMnY3NzUuM2MtMC4xIDQ1LjMtMzYuOSA4Mi4xLTgyLjMgODIuMXoiIGZpbGw9IiNGQUZDRkIiIHAtaWQ9IjY5MjM0Ij48L3BhdGg+PHBhdGggZD0iTTg2Mi4zIDk5MS40SDE0Mi43Yy01LjQgMC0xMC4yLTMuNC0xMi04LjUtMS44LTUuMS0wLjItMTAuOCA0LTE0LjJsODUuNC02OS40VjEyMS4yYzAtNTIuMyA0Mi42LTk0LjkgOTQuOS05NC45aDU0Ny40YzUyLjMgMCA5NC45IDQyLjYgOTQuOSA5NC45djc3NS4zYzAgNTIuMy00Mi42IDk0LjktOTUgOTQuOXogbS02ODMuNy0yNS41aDY4My44YzM4LjMgMCA2OS40LTMxLjIgNjkuNC02OS40VjEyMS4yYzAtMzguMy0zMS4yLTY5LjQtNjkuNC02OS40SDMxNWMtMzguMyAwLTY5LjQgMzEuMi02OS40IDY5LjR2Nzg0LjJjMCAzLjgtMS43IDcuNS00LjcgOS45bC02Mi4zIDUwLjZ6IiBmaWxsPSIjMEYwRjBGIiBwLWlkPSI2OTIzNSI+PC9wYXRoPjxwYXRoIGQ9Ik00MjAuNSAyODEuOW0tMzkgMGEzOSAzOSAwIDEgMCA3OCAwIDM5IDM5IDAgMSAwLTc4IDBaIiBmaWxsPSIjMEYwRjBGIiBwLWlkPSI2OTIzNiI+PC9wYXRoPjxwYXRoIGQ9Ik03MzcuMyAyODEuOW0tMzkgMGEzOSAzOSAwIDEgMCA3OCAwIDM5IDM5IDAgMSAwLTc4IDBaIiBmaWxsPSIjMEYwRjBGIiBwLWlkPSI2OTIzNyI+PC9wYXRoPjxwYXRoIGQ9Ik02NjkuNyAzNjRjMCA1MC00MC45IDkwLjgtOTAuOCA5MC44LTUwIDAtOTAuOC00MC45LTkwLjgtOTAuOCIgZmlsbD0iI0ZBRkNGQiIgcC1pZD0iNjkyMzgiPjwvcGF0aD48cGF0aCBkPSJNNTc4LjkgNDY3LjZjLTU3LjEgMC0xMDMuNi00Ni41LTEwMy42LTEwMy42IDAtNyA1LjctMTIuNyAxMi43LTEyLjcgNyAwIDEyLjcgNS43IDEyLjcgMTIuNyAwIDQzLjEgMzUgNzguMSA3OC4xIDc4LjEgNDMuMSAwIDc4LjEtMzUgNzguMS03OC4xIDAtNyA1LjctMTIuNyAxMi43LTEyLjdzMTIuNyA1LjcgMTIuNyAxMi43YzAuMiA1Ny4yLTQ2LjMgMTAzLjYtMTAzLjQgMTAzLjZ6TTUzMi40IDYwNkgzMjguMWMtNyAwLTEyLjctNS43LTEyLjctMTIuNyAwLTcgNS43LTEyLjcgMTIuNy0xMi43aDIwNC4yYzcgMCAxMi43IDUuNyAxMi43IDEyLjcgMC4xIDYuOS01LjYgMTIuNy0xMi42IDEyLjd6TTUzMi40IDcxMC43SDMyOC4xYy03IDAtMTIuNy01LjctMTIuNy0xMi43czUuNy0xMi43IDEyLjctMTIuN2gyMDQuMmM3IDAgMTIuNyA1LjcgMTIuNyAxMi43cy01LjYgMTIuNy0xMi42IDEyLjd6TTUzMi40IDgxNS40SDMyOC4xYy03IDAtMTIuNy01LjctMTIuNy0xMi43IDAtNyA1LjctMTIuNyAxMi43LTEyLjdoMjA0LjJjNyAwIDEyLjcgNS43IDEyLjcgMTIuNyAwLjEgNy01LjYgMTIuNy0xMi42IDEyLjd6TTgzNC43IDgxNS40aC0xOTljLTcgMC0xMi43LTUuNy0xMi43LTEyLjcgMC03IDUuNy0xMi43IDEyLjctMTIuN2gxOTljNyAwIDEyLjcgNS43IDEyLjcgMTIuNyAwLjEgNy01LjYgMTIuNy0xMi43IDEyLjd6IiBmaWxsPSIjMTQxNDE0IiBwLWlkPSI2OTIzOSI+PC9wYXRoPjxwYXRoIGQ9Ik03OTguOCA3MzcuM0g2NzEuN2MtMTUuNSAwLTI4LTEyLjUtMjgtMjh2LTkyLjdjMC0xNS41IDEyLjUtMjggMjgtMjhoMTI3LjJjMTUuNSAwIDI4IDEyLjUgMjggMjh2OTIuN2MwIDE1LjUtMTIuNiAyOC0yOC4xIDI4eiIgZmlsbD0iIzlEQzZBRiIgcC1pZD0iNjkyNDAiPjwvcGF0aD48cGF0aCBkPSJNNzk5LjQgNzUwSDY3MS4xYy0yMi4yIDAtNDAuMi0xOC00MC4yLTQwLjJWNjE2YzAtMjIuMiAxOC00MC4yIDQwLjItNDAuMmgxMjguM2MyMi4yIDAgNDAuMiAxOCA0MC4yIDQwLjJ2OTMuOGMwIDIyLjItMTggNDAuMi00MC4yIDQwLjJ6TTY3MS4xIDYwMS4zYy04LjEgMC0xNC43IDYuNi0xNC43IDE0Ljd2OTMuOGMwIDguMSA2LjYgMTQuNyAxNC43IDE0LjdoMTI4LjNjOC4xIDAgMTQuNy02LjYgMTQuNy0xNC43VjYxNmMwLTguMS02LjYtMTQuNy0xNC43LTE0LjdINjcxLjF6IiBmaWxsPSIjMTkxOTE5IiBwLWlkPSI2OTI0MSI+PC9wYXRoPjxwYXRoIGQ9Ik0xNTIuMyA5NzguNmgtNS43Yy00NC41IDAtODAuNS0zNi04MC41LTgwLjVWMjM3YzAtMjguMyAyMi45LTUxLjIgNTEuMi01MS4yaDExNS41djcxMi4zYzAgNDQuNS0zNi4xIDgwLjUtODAuNSA4MC41eiIgZmlsbD0iIzlEQzZBRiIgcC1pZD0iNjkyNDIiPjwvcGF0aD48cGF0aCBkPSJNMTQ5LjQgOTkxLjRjLTUzIDAtOTYuMS00My4xLTk2LjEtOTYuMVYyMzguOGMwLTM2LjIgMjkuNS02NS43IDY1LjctNjUuN2gxMjYuNHY3MjIuMmMwLjEgNTMtNDMgOTYuMS05NiA5Ni4xeiBtLTMwLjMtNzkyLjljLTIyLjIgMC00MC4yIDE4LjEtNDAuMiA0MC4ydjY1Ni41YzAgMzguOSAzMS43IDcwLjYgNzAuNiA3MC42czcwLjYtMzEuNyA3MC42LTcwLjZWMTk4LjVoLTEwMXoiIGZpbGw9IiMxOTE5MTkiIHAtaWQ9IjY5MjQzIj48L3BhdGg+PC9zdmc+);background-size:65%;background-position:50%;background-repeat:no-repeat}.cards-panel{display:inline-block;width:600px;height:400px;padding:20px}.cards-panel__search{padding-bottom:10px;border-bottom:1px solid #eee;margin-bottom:20px}.cards-panel select{padding:2px 6px;margin-right:10px}.cards-panel ul li{line-height:1.7}.cards-panel a{color:#000}.cards-panel a:hover{color:red}.toolbars input.cards-panel__input{padding:5px 10px;width:230px;border-radius:4px;border:1px solid #d6d6d6}',""])},function(e,t){function n(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var u=i(r);return[n].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([u]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var u=this[r][0];"number"==typeof u&&(i[u]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;var i=n(5),r=i.renderString;t.render=r},function(e,t,n){"use strict";function i(e){var t="";for(var n in e){var i=e[n];"innerHTML"!==n&&((0,u.isValidAttribute)(i)&&(t+=" "+n+'="'+e[n]+'"'))}return t}function r(e,t){var n=arguments.length<=2||void 0===arguments[2]?"0":arguments[2];if((0,u.isText)(e))return e.nodeValue;if((0,u.isEmpty)(e))return"<noscript></noscript>";if((0,u.isThunk)(e)){var o=e.props,c=e.component,a=e.children;return r((0,c.render)({children:a,props:o,path:n,context:t}),t,n)}var M=e.attributes,l=e.type,y=e.children,d=M.innerHTML,j="<"+l+i(M)+">";return j+=d||y.map(function(e,i){return r(e,t,n+"."+(null==e.key?i:e.key))}).join(""),j+="</"+l+">"}Object.defineProperty(t,"__esModule",{value:!0}),t.renderString=r;var u=n(6)},function(e,t,n){(function(t){e.exports=t.dekuElement=n(8)}).call(t,n(7))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function u(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),u=2;u<n;u++)i[u-2]=arguments[u];if(!e)throw new TypeError("element() needs a type.");t=t||{},i=(i||[]).reduce(o,[]);var c="string"==typeof t.key||"number"==typeof t.key?t.key:void 0;return delete t.key,"object"===(void 0===e?"undefined":r(e))||"function"==typeof e?M(e,c,t,i):{attributes:t,children:i,type:e,key:c}}function o(e,t){if("string"==typeof t||"number"==typeof t)e.push(c(t));else if(null===t)e.push(a());else if(Array.isArray(t))e=[].concat(i(e),i(t.reduce(o,[])));else{if(void 0===t)throw new Error("vnode can't be undefined. Did you mean to use null?");e.push(t)}return e}function c(e){return{type:"#text",nodeValue:e}}function a(){return{type:"#empty"}}function M(e,t,n,i){return{type:"#thunk",children:i,props:n,component:e,key:t}}function l(e){return"boolean"==typeof e?e:"function"!=typeof e&&(""===e||void 0!==e&&null!==e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=u,t.createTextElement=c,t.createEmptyElement=a,t.createThunkElement=M,t.isValidAttribute=l;var y=t.isThunk=function(e){return"#thunk"===e.type};t.isText=function(e){return"#text"===e.type},t.isEmpty=function(e){return"#empty"===e.type},t.isSameThunk=function(e,t){return y(e)&&y(t)&&e.component===t.component},t.groupByKey=function(e){return e.reduce(function(e,t,n){return null!=t&&!1!==t&&e.push({key:String(t.key||n),item:t,index:n}),e},[])},t.createPath=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(".")}}]).default});
//# sourceMappingURL=holy-editor-plugin-cards.js.map